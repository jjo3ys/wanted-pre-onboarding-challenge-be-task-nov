TCP와 UDP는 OSI 7계층 중 4층인 전송계층에 사용되는 프로토콜입니다.
둘 다 데이터 전달을 담당하며 패킷의 오류를 검사하고 재전송 요구 등의 제어를 담당합니다.

## TCP
TCP는 Transmission Control Protocol의 약자로 연결 지향적 프로토콜입니다.
연결에 대해 안정적, 순차적, 무결로 신뢰성을 보장하는 서비스입니다.

### 연결형 서비스
3-way handshaking 과정을 통해 연결을 설정하고, 4-way handshaking 과정을 통해 해제합니다.

#### 3-way handshaking
데이터 전송 전 정확성을 보장하기 위해 상대 컴퓨터와 통신을 확인하는 과정

> 1. 클라이언트가 서버에 접속을 요청하는 SYN 패킷을 보냅니다. 이후 클라이언트는 SYN_SENT 상태로 대기합니다.
> 2. 서버는 SYN을 받고 클라이언트에 ACK와 SYN 패킷을 발송한 뒤 다시 클라이언트가 ACK로 응답하기를 기다립니다.
이때 서버는 SYN_RECEIVED 상태가 됩니다.
> 3. ACK와 SYN을 받은 클라이언트는 ESTABLISHED 상태로 변경하고, 서버에게 ACK를 보냅니다.
응답 ACK를 받은 서버는 ESTABLISHED 상태로 변경합니다.

#### 4-way handshaking
상대 컴퓨터와 통신을 종료하는 과정

> 1. 클라이언트가 연결을 종료하겠다는 FIN을 보내고 FIN_WAIT_1 상태로 대기합니다.
> 2. 서버는 CLOSE_WAIT 상태로 바꾸고 응답 ACK를 전달하며 동시에 해당 포트에 연결되어 있는 어플리케이션에 close를 요청합니다.
(이때 서버는 끝날 때 가지 TIME_WAIT 상태)
> 3. ACK를 받은 클라이언트는 FIN_WAIT_2상태로 변경합니다.
> 4. close를 요청받은 서버 어플리케이션이 종료되면 FIN을 클라이언트에 보내고 LAST_ACK 상태로 변경합니다.
> 5. FIN을 받은 클라이언트는 ACK를 다시 서버에 전송하고 TIME_WAIT 상태로 바꿉니다.
TIME_WAIT 상태에서 일정 시간이 지나면 CLOSED가 되며, ACK를 받은 서버도 CLOSED로 변경합니다.
